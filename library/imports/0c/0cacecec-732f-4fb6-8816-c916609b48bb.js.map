{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Spear.js"],"names":["spear","cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","MedjumpHeight","MaxjumpHeight","animationEffect","default","type","Prefab","explosionEffect","restartBtn","Node","restartLabel","start","onLoad","enabled","xSpeed","Global","parentSpear","node","director","getCollisionManager","intervalSetting","count","reset","resetCount","holdMoveAt","runAction","goUp","stopMoveAt","stopAllActions","goDownAt","goDown","jumpUp","moveBy","v2","repeat","jumpDown","moveTo","animation","anime","instantiate","setPosition","position","x","y","addChild","setJumpAction","easing","easeCubicActionOut","easeCubicActionIn","console","log","sequence","startMoveAt","Gameover","getGameOverPos","timer","randX","randY","dt","gameEnd","active","stone"],"mappings":"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","file":"Spear.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\n\r\nvar spear = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 主角跳跃高度\r\n        jumpHeight: 0,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0,\r\n        // 最大移动速度\r\n        maxMoveSpeed: 0,\r\n        // 加速度\r\n        accel: 0,\r\n        //Medium Jump\r\n        MedjumpHeight: 200,\r\n        //Max Jump\r\n        MaxjumpHeight: 250,\r\n        animationEffect: {\r\n            default:null, \r\n            type:cc.Prefab\r\n        },\r\n        explosionEffect:{\r\n            default:null,\r\n            type:cc.Prefab\r\n        },\r\n        restartBtn:{\r\n            default:null,\r\n            type: cc.Node\r\n        },\r\n\r\n        restartLabel:{\r\n            default:null,\r\n            type: cc.Node\r\n        },\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onLoad: function() {\r\n\r\n\r\n        this.enabled=false;\r\n        // 主角当前水平方向速度\r\n        this.xSpeed = 0;\r\n        Global.parentSpear = this.node;\r\n\r\n        //Collison\r\n        cc.director.getCollisionManager().enabled = true;\r\n\r\n\r\n    },\r\n\r\n\r\n    intervalSetting: function() {\r\n            Global.count += 1;\r\n            Global.reset = 0;\r\n            return Global.count;\r\n        \r\n    },\r\n\r\n    resetCount: function(){\r\n        Global.count = 0;\r\n        Global.reset = 1;\r\n\r\n        return Global.reset; \r\n\r\n\r\n    },\r\n\r\n    \r\n    holdMoveAt: function () {\r\n        this.enabled = true;\r\n        this.xSpeed = 0;\r\n        this.node.runAction(this.goUp());\r\n        \r\n    },\r\n\r\n        \r\n    stopMoveAt: function () {\r\n        this.enabled = true;\r\n        this.xSpeed = 0;\r\n        this.node.stopAllActions();\r\n    },\r\n\r\n    goDownAt: function () {\r\n        this.enabled = true;\r\n        this.xSpeed = 0;\r\n        this.node.runAction(this.goDown());\r\n    },\r\n\r\n    goUp: function(){\r\n\r\n        var jumpUp = cc.moveBy(0.5, cc.v2(0, this.MaxjumpHeight));\r\n        return cc.repeat(jumpUp,1);  \r\n        // return cc.repeatForever(jumpUp);\r\n\r\n    },\r\n\r\n    goDown: function(){\r\n\r\n            var jumpDown = cc.moveTo(0.1, cc.v2(21, -311));\r\n            return cc.repeat(jumpDown,1);\r\n    },\r\n\r\n\r\n    animation:function(){\r\n        var anime = cc.instantiate(this.animationEffect);\r\n        anime.setPosition(cc.v2(Global.position.x,Global.position.y));\r\n        this.node.addChild(anime);\r\n    },\r\n\r\n    setJumpAction: function () {\r\n\r\n\r\n                    // 跳跃上升\r\n        if(Global.count == 1 || Global.count == 0 || Global.count == null){\r\n            var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n            // 下落\r\n            var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n            console.log(\"hello\");\r\n\r\n        }\r\n\r\n        else if(Global.count == 2){\r\n\r\n            // 跳跃上升\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, (this.MedjumpHeight))).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -(this.MedjumpHeight))).easing(cc.easeCubicActionIn());\r\n        //Rotate\r\n\r\n        }\r\n        else if(Global.count == 3){\r\n\r\n        // 跳跃上升\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.MaxjumpHeight)).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.MaxjumpHeight)).easing(cc.easeCubicActionIn());\r\n\r\n\r\n        }\r\n    \r\n\r\n        return cc.repeat(cc.sequence(jumpUp,jumpDown),1);\r\n    },\r\n\r\n    startMoveAt: function () {\r\n        this.enabled = true;\r\n        this.xSpeed = 0;\r\n        this.node.runAction(this.setJumpAction());\r\n    },\r\n\r\n    stopMoveAt: function () {\r\n        this.node.stopAllActions();\r\n    },\r\n\r\n    spawnGameOver: function() {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var Gameover = cc.instantiate(this.restartBtn);\r\n        this.node.addChild(Gameover);\r\n        Gameover.setPosition(this.getGameOverPos());\r\n        this.timer = 0;\r\n    },\r\n\r\n    getGameOverPos: function () {\r\n        var randX = 0;\r\n        // 根据地平面位置和主角跳跃高度，随机得到一个星星的 y 坐标\r\n        var randY = 348\r\n        // 返回星星坐标\r\n        return cc.v2(randX, randY);\r\n    },\r\n\r\n    update (dt) {\r\n\r\n        if(Global.gameEnd == 1){\r\n            this.stopMoveAt();\r\n            this.restartBtn.active = true;\r\n            this.restartLabel.active = true;\r\n        }\r\n\r\n        if(Global.stone == 1){\r\n            this.stopMoveAt();\r\n            this.goDownAt();\r\n            Global.stone = 0\r\n        }\r\n\r\n        if (Global.animation == 2){\r\n            this.animation();\r\n            Global.animation = 1; \r\n        }\r\n    },\r\n});\r\n"]}