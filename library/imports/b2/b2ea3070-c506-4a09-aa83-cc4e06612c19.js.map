{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Bomb.js"],"names":["Orange","require","cc","Class","extends","Component","properties","orange","default","type","onCollisionEnter","other","self","Global","explosionAnimation","node","destroy","gameEnd","onLoad","moveleftway","moveFood","runAction","moveleft","moveBy","v2","repeatForever","spawnGameOver","Gameover","instantiate","starPrefab","addChild","setPosition","getGameOverPos","timer","randX","randY","start","_timer","update","dt","pos","getPosition","stopMoveAt","x","y","stopAllActions"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,SAAR,CAAf;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,kBAAMT;AAFF;AAFA,KAHP;;AAaLU,sBAAkB,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrCC,eAAOC,kBAAP,GAA4B,CAA5B;AACA,aAAKC,IAAL,CAAUC,OAAV;AACAH,eAAOI,OAAP,GAAiB,CAAjB;AACH,KAjBI;;AAmBLC,YAAQ,kBAAW;;AAEf;AACA;AACA;;;AAGA,YAAIC,cAAc,KAAKC,QAAL,EAAlB;AACA,aAAKL,IAAL,CAAUM,SAAV,CAAoBF,WAApB;AAEH,KA7BI;;AA+BLC,cAAU,oBAAU;;AAEhB,YAAIE,WAAYpB,GAAGqB,MAAH,CAAU,CAAV,EAAarB,GAAGsB,EAAH,CAAM,CAAC,GAAP,EAAW,CAAX,CAAb,CAAhB;AACA,eAAOtB,GAAGuB,aAAH,CAAiBH,QAAjB,CAAP;AAEH,KApCI;;AAsCLI,mBAAe,yBAAW;AACtB;AACA,YAAIC,WAAWzB,GAAG0B,WAAH,CAAe,KAAKC,UAApB,CAAf;AACA,aAAKd,IAAL,CAAUe,QAAV,CAAmBH,QAAnB;AACAA,iBAASI,WAAT,CAAqB,KAAKC,cAAL,EAArB;AACA,aAAKC,KAAL,GAAa,CAAb;AACH,KA5CI;;AA8CLD,oBAAgB,0BAAY;AACxB,YAAIE,QAAQ,CAAZ;AACA;AACA,YAAIC,QAAQ,GAAZ;AACA;AACA,eAAOjC,GAAGsB,EAAH,CAAMU,KAAN,EAAaC,KAAb,CAAP;AACH,KApDI;;AAsDLC,WAAO,iBAAY;AACf,aAAKC,MAAL,GAAc,GAAd;AACD,KAxDE;;AA0DHC,YAAQ,gBAAUC,EAAV,EAAc;AACpB,aAAKF,MAAL,IAAeE,EAAf;AACA,YAAIC,MAAM,CAAV;AACA,YAAK,KAAKH,MAAL,IAAe,GAApB,EAA0B;AACtBG,kBAAM,KAAKzB,IAAL,CAAU0B,WAAV,EAAN;AACA;AACA,gBAAG5B,OAAOI,OAAP,IAAkB,CAArB,EAAuB;AACnB,qBAAKyB,UAAL;AACA,qBAAKhB,aAAL;AACH,aAHD,MAKK,IAAIc,IAAIG,CAAJ,IAAS,CAAC,GAAd,EAAkB;AACnB;AACA,qBAAK5B,IAAL,CAAUgB,WAAV,CAAsB,GAAtB,EAA0BS,IAAII,CAA9B;AACA;;AAGH;AAEJ;AAIF,KAjFE;;AAmFLF,gBAAY,sBAAY;AACpB,aAAK3B,IAAL,CAAU8B,cAAV;AACH;;AArFI,CAAT","file":"Bomb.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["const Orange = require('Orange2');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    \r\n    properties: {\r\n\r\n        orange: {\r\n            default: null,\r\n            type: Orange\r\n        },\r\n    },\r\n\r\n\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        Global.explosionAnimation = 2;\r\n        this.node.destroy();\r\n        Global.gameEnd = 1;\r\n    },\r\n\r\n    onLoad: function() {\r\n       \r\n        // cc.director.getCollisionManager().enabled = true;\r\n        // var actionBy = this.rotateFood();\r\n        // this.node.runAction(actionBy);\r\n\r\n\r\n        var moveleftway = this.moveFood();\r\n        this.node.runAction(moveleftway);\r\n\r\n    },\r\n\r\n    moveFood: function(){\r\n\r\n        var moveleft =  cc.moveBy(4, cc.v2(-800,0));\r\n        return cc.repeatForever(moveleft);\r\n\r\n    },\r\n\r\n    spawnGameOver: function() {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var Gameover = cc.instantiate(this.starPrefab);\r\n        this.node.addChild(Gameover);\r\n        Gameover.setPosition(this.getGameOverPos());\r\n        this.timer = 0;\r\n    },\r\n\r\n    getGameOverPos: function () {\r\n        var randX = 0;\r\n        // 根据地平面位置和主角跳跃高度，随机得到一个星星的 y 坐标\r\n        var randY = 348\r\n        // 返回星星坐标\r\n        return cc.v2(randX, randY);\r\n    },\r\n\r\n    start: function () {\r\n        this._timer = 0.0;\r\n      },\r\n    \r\n      update: function (dt) {\r\n        this._timer += dt;\r\n        var pos = 0\r\n        if ( this._timer >= 0.0 ) {\r\n            pos = this.node.getPosition();\r\n            // console.log(pos + \" finding position\")\r\n            if(Global.gameEnd == 1){\r\n                this.stopMoveAt();\r\n                this.spawnGameOver\r\n            }\r\n\r\n            else if( pos.x <= -600){\r\n                // console.log(pos + \"before reset position\")\r\n                this.node.setPosition(300,pos.y)\r\n                // console.log(this.node.getPosition()+ \"after reset position\")\r\n\r\n                \r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n      },\r\n\r\n    stopMoveAt: function () {\r\n        this.node.stopAllActions();\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n});\r\n"]}