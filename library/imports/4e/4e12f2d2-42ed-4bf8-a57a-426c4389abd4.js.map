{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Game.js"],"names":["Player","require","Star","Spear","Game","cc","Class","extends","Component","properties","player","default","type","spear","SpearNode","Node","onLoad","node","on","EventType","TOUCH_START","console","log","Global","reset","holdMoveAt","TOUCH_MOVE","TOUCH_END","startMoveAt","resetCount","stopMoveAt","goDownAt","TOUCH_CANCEL","enabled","score","starPool","NodePool","ApplePool","OrangePool","intervalSetting","count","onStartGame","btnNode","x","GameOver","active","update","dt","timer","starDuration","gameOver"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["\nconst Player = require('Player');\nconst Star = require('Star');\nconst Spear = require('Spear');\nvar Game = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // 这个属性引用了星星预制资源\n        // player 节点，用于获取主角弹跳的高度，和控制主角行动开关\n        player: {\n            default: null,\n            type: Player\n        },\n        spear: {\n            default: null,\n            type: Spear\n        },\n        SpearNode: {\n            default: null,\n            type: cc.Node\n        },\n\n\n    },\n\n    onLoad: function () {\n\n    \n\n        this.node.on(cc.Node.EventType.TOUCH_START, () => { \n            console.log(\"TOUCH_START\")\n            Global.reset = 0;\n\n            this.spear.holdMoveAt();\n            \n\n    \n                // this.schedule(function() {\n                //     // Here `this` is referring to the component\n                //     console.log(this.intervalSetting());\n                // }, 1);\n\n                // this.callback = function () {\n                //     if (Global.count === 3 || Global.reset == 1) {\n                //         // Cancel this timer at the sixth call-back\n                //         this.unschedule(this.callback);\n\n                //     }\n                //     else if(Global.count < 3 || Global.reset == 0){\n                //         this.spear.intervalSetting();\n                //         console.log(Global.count);\n\n                //     }\n\n\n                    \n                \n                // }\n                // this.schedule(this.callback, 0.5);\n\n            \n\n\n        }, this, true);\n\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, () => {\n            console.log(\"TOUCH_MOVE\");\n            \n\n        }, this, true);\n\n        this.node.on(cc.Node.EventType.TOUCH_END, () => {\n            console.log(\"TOUCH_END\");\n            this.spear.startMoveAt();\n            this.spear.resetCount();\n            this.spear.stopMoveAt();\n            this.spear.goDownAt();\n\n        }, this, true);\n\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, () => {\n            console.log(\"TOUCH_CANCEL\");\n            this.spear.resetCount();\n        }, this, true);\n\n\n        this.enabled=false;\n        // 初始化计分\n        this.score = 0;\n\n        // initialize star and score pool\n        this.starPool = new cc.NodePool('Star');\n        this.ApplePool = new cc.NodePool('Apple');\n        this.OrangePool = new cc.NodePool('Orange');\n    },\n\n    intervalSetting: function() {\n  \n      \n        Global.count += 1;\n        Global.reset = 0;\n        return Global.count;\n    \n},\n\n    resetCount: function(){\n        Global.count = 0;\n        Global.reset = 1;\n\n        return Global.reset; \n\n\n    },\n\n\n    onStartGame: function(){\n\n        this.enabled=true\n\n        this.btnNode.x = 3000;\n        this.GameOver.active = false;\n\n\n        \n    },\n    \n\n\n\n    update: function (dt) {\n        // 每帧更新计时器，超过限度还没有生成新的星星\n        // 就会调用游戏失败逻辑\n        if (this.timer > this.starDuration) {\n            this.gameOver();\n            this.enabled = false;   // disable gameOver logic to avoid load scene repeatedly\n            return;\n        }\n        this.timer += dt;\n    },\n\n});"]}