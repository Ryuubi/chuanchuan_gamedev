{"version":3,"sources":["Spear.js"],"names":["window","Global","count","reset","arrayfood","spear","cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","MedjumpHeight","MaxjumpHeight","start","onLoad","enabled","xSpeed","director","getCollisionManager","intervalSetting","resetCount","setJumpAction","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","repeat","sequence","startMoveAt","node","runAction"],"mappings":"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","file":"Spear.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nwindow.Global={\r\n    count: 0 ,\r\n    reset: 0,\r\n    arrayfood: []\r\n}\r\nvar spear = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // 主角跳跃高度\r\n        jumpHeight: 0,\r\n        // 主角跳跃持续时间\r\n        jumpDuration: 0,\r\n        // 最大移动速度\r\n        maxMoveSpeed: 0,\r\n        // 加速度\r\n        accel: 0,\r\n        //Medium Jump\r\n        MedjumpHeight: 200,\r\n        //Max Jump\r\n        MaxjumpHeight: 250,\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onLoad: function() {\r\n\r\n\r\n        this.enabled=false;\r\n        // 主角当前水平方向速度\r\n        this.xSpeed = 0;\r\n\r\n        //Collison\r\n        cc.director.getCollisionManager().enabled = true;\r\n\r\n        // this.node.on(cc.Node.EventType.TOUCH_START, () => { \r\n        //     console.log(\"TOUCH_START\")\r\n        //     Global.reset = 0;\r\n    \r\n        //         // this.schedule(function() {\r\n        //         //     // Here `this` is referring to the component\r\n        //         //     console.log(this.intervalSetting());\r\n        //         // }, 1);\r\n\r\n        //         this.callback = function () {\r\n        //             if (Global.count === 3 || Global.reset == 1) {\r\n        //                 // Cancel this timer at the sixth call-back\r\n        //                 this.unschedule(this.callback);\r\n\r\n        //             }\r\n        //             else if(Global.count < 3 || Global.reset == 0){\r\n        //                 this.intervalSetting();\r\n        //                 console.log(Global.count);\r\n\r\n        //             }\r\n\r\n\r\n                    \r\n                \r\n        //         }\r\n        //         this.schedule(this.callback, 1);\r\n            \r\n\r\n\r\n        // }, this, true);\r\n\r\n        // this.node.on(cc.Node.EventType.TOUCH_MOVE, () => {\r\n        //     console.log(\"TOUCH_MOVE\");\r\n            \r\n\r\n        // }, this, true);\r\n\r\n        // this.node.on(cc.Node.EventType.TOUCH_END, () => {\r\n        //     console.log(\"TOUCH_END\");\r\n        //     this.startMoveAt();\r\n        //     this.resetCount();\r\n\r\n        // }, this, true);\r\n\r\n        // this.node.on(cc.Node.EventType.TOUCH_CANCEL, () => {\r\n        //     console.log(\"TOUCH_CANCEL\");\r\n        //     this.resetCount();\r\n        // }, this, true);\r\n\r\n    },\r\n\r\n\r\n    intervalSetting: function() {\r\n            Global.count += 1;\r\n            Global.reset = 0;\r\n            return Global.count;\r\n        \r\n    },\r\n\r\n    resetCount: function(){\r\n        Global.count = 0;\r\n        Global.reset = 1;\r\n\r\n        return Global.reset; \r\n\r\n\r\n    },\r\n\r\n    setJumpAction: function () {\r\n\r\n\r\n                    // 跳跃上升\r\n        if(Global.count == 1 || Global.count == 0 || Global.count == null){\r\n            var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n            // 下落\r\n            var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n\r\n        }\r\n        //Rotate\r\n        // var actionBy = cc.rotateBy(1,160);\r\n        // 不断重复，而且每次完成落地动作后调用回调来播放声音\r\n\r\n\r\n        else if(Global.count == 2){\r\n\r\n            // 跳跃上升\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, (this.MedjumpHeight))).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -(this.MedjumpHeight))).easing(cc.easeCubicActionIn());\r\n        //Rotate\r\n\r\n        }\r\n        else if(Global.count == 3){\r\n\r\n        // 跳跃上升\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.MaxjumpHeight)).easing(cc.easeCubicActionOut());\r\n        // 下落\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.MaxjumpHeight)).easing(cc.easeCubicActionIn());\r\n\r\n\r\n        }\r\n    \r\n\r\n        return cc.repeat(cc.sequence(jumpUp,jumpDown),1);\r\n    },\r\n\r\n    startMoveAt: function () {\r\n        this.enabled = true;\r\n        this.xSpeed = 0;\r\n        this.node.runAction(this.setJumpAction());\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}